{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["'use strict'\n\nclass SideMenu {\n\tconstructor(aside, nav = 'nav') {\n\t\tthis.menu = document.querySelector(aside)\n\n\t\tif (!this.menu) {\n\t\t\tthrow new Error('✖ Missing aside')\n\t\t}\n\n\t\tthis.nav = this.menu.querySelector(nav)\n\n\t\tif (!this.nav) {\n\t\t\tthrow new Error('✖ Missing nav')\n\t\t}\n\n\t\tthis.startX = 0\n\t\tthis.currentX = 0\n\t\tthis.touching = false\n\n\t\tthis.update = this.update.bind(this)\n\t\tthis.addEvents()\n\t}\n\n\taddEvents() {\n\t\tthis.menu.addEventListener('touchstart', this, this.applyPassive())\n\t\tthis.menu.addEventListener('touchmove', this, this.applyPassive())\n\t\tthis.menu.addEventListener('touchend', this)\n\t\tthis.menu.addEventListener('touchcancel', this)\n\t\tthis.menu.addEventListener('click', this)\n\t}\n\n\tupdate() {\n\t\tif (this.touching === false) {\n\t\t\treturn\n\t\t}\n\t\trequestAnimationFrame(this.update)\n\t\tconst position = Math.min(0, this.currentX - this.startX)\n\t\tthis.nav.style.transform = `matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ${position}, 0, 0, 1)`\n\t}\n\n\tonTouchstart(event) {\n\t\tif (this.menu.classList.contains('sidemenu--open') === false) {\n\t\t\treturn\n\t\t}\n\t\tthis.startX = event.touches[0].pageX\n\t\tthis.currentX = this.startX\n\t\tthis.touching = true\n\t\trequestAnimationFrame(this.update)\n\t}\n\n\tonTouchmove(event) {\n\t\tif (this.touching === false) {\n\t\t\treturn\n\t\t}\n\t\tthis.currentX = event.touches[0].pageX\n\t}\n\n\tonTouchend() {\n\t\tif (this.touching === false) {\n\t\t\treturn\n\t\t}\n\t\tthis.touching = false\n\t\tconst position = Math.min(0, this.currentX - this.startX)\n\t\tthis.nav.style.transform = ''\n\t\tif (position < 0) {\n\t\t\tthis.close()\n\t\t}\n\t}\n\n\tonTouchcancel() {\n\t\tthis.onTouchend()\n\t}\n\n\tonTransitionend() {\n\t\tthis.menu.classList.remove('sidemenu--anima')\n\t\tthis.menu.removeEventListener('transitionend', this)\n\t}\n\n\tonClick() {\n\t\tthis.close()\n\t}\n\n\topen() {\n\t\tthis.menu.classList.add('sidemenu--anima')\n\t\tthis.menu.classList.add('sidemenu--open')\n\t\tthis.menu.addEventListener('transitionend', this)\n\t}\n\n\tclose() {\n\t\tthis.menu.classList.add('sidemenu--anima')\n\t\tthis.menu.classList.remove('sidemenu--open')\n\t\tthis.menu.addEventListener('transitionend', this)\n\t}\n\n\thandleEvent(event) {\n\t\tconst ev = `${event.type.charAt(0).toUpperCase()}${event.type.slice(1)}`\n\t\tif (this[`on${ev}`]) {\n\t\t\tthis[`on${ev}`](event)\n\t\t}\n\t}\n\n\tapplyPassive() {\n\t\tif (this.supportsPassive !== undefined) {\n\t\t\treturn this.supportsPassive ? {passive: true} : false\n\t\t}\n\t\tlet isSupported = false\n\t\ttry {\n\t\t\tdocument.addEventListener('test', null, {\n\t\t\t\tget passive() {\n\t\t\t\t\tisSupported = true\n\t\t\t\t}\n\t\t\t})\n\t\t} catch (err) {\n\t\t\tconsole.log(err)\n\t\t}\n\t\tthis.supportsPassive = isSupported\n\t\treturn this.applyPassive()\n\t}\n}\n\nexport default SideMenu\n"],"names":[],"mappings":";;;;;;AAEA,IAAM,QAAQ,GAAC,iBACH,CAAC,KAAK,EAAE,GAAW,EAAE;0BAAV,GAAG,KAAK;;CAC9B,IAAK,CAAC,IAAI,GAAG,QAAQ,CAAC,aAAa,CAAC,KAAK,CAAC,CAAA;;CAE1C,IAAK,CAAC,IAAI,CAAC,IAAI,EAAE;EAChB,MAAO,IAAI,KAAK,CAAC,iBAAiB,CAAC;EAClC;;CAEF,IAAK,CAAC,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,aAAa,CAAC,GAAG,CAAC,CAAA;;CAExC,IAAK,CAAC,IAAI,CAAC,GAAG,EAAE;EACf,MAAO,IAAI,KAAK,CAAC,eAAe,CAAC;EAChC;;CAEF,IAAK,CAAC,MAAM,GAAG,CAAC,CAAA;CAChB,IAAK,CAAC,QAAQ,GAAG,CAAC,CAAA;CAClB,IAAK,CAAC,QAAQ,GAAG,KAAK,CAAA;;CAEtB,IAAK,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAA;CACrC,IAAK,CAAC,SAAS,EAAE,CAAA;CAChB,CAAA;;AAEF,mBAAC,SAAS,yBAAG;CACZ,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,YAAY,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAA;CACpE,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,YAAY,EAAE,CAAC,CAAA;CACnE,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAAC,CAAA;CAC7C,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,aAAa,EAAE,IAAI,CAAC,CAAA;CAChD,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,OAAO,EAAE,IAAI,CAAC,CAAA;CACzC,CAAA;;AAEF,mBAAC,MAAM,sBAAG;CACT,IAAK,IAAI,CAAC,QAAQ,KAAK,KAAK,EAAE;EAC7B,MAAO;EACN;CACF,qBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;CACnC,IAAO,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAA;CAC1D,IAAK,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,+CAA8C,GAAE,QAAQ,eAAW,CAAA;CAC9F,CAAA;;AAEF,mBAAC,YAAY,0BAAC,KAAK,EAAE;CACpB,IAAK,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,QAAQ,CAAC,gBAAgB,CAAC,KAAK,KAAK,EAAE;EAC9D,MAAO;EACN;CACF,IAAK,CAAC,MAAM,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;CACrC,IAAK,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAA;CAC5B,IAAK,CAAC,QAAQ,GAAG,IAAI,CAAA;CACrB,qBAAsB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAA;CAClC,CAAA;;AAEF,mBAAC,WAAW,yBAAC,KAAK,EAAE;CACnB,IAAK,IAAI,CAAC,QAAQ,KAAK,KAAK,EAAE;EAC7B,MAAO;EACN;CACF,IAAK,CAAC,QAAQ,GAAG,KAAK,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,CAAA;CACtC,CAAA;;AAEF,mBAAC,UAAU,0BAAG;CACb,IAAK,IAAI,CAAC,QAAQ,KAAK,KAAK,EAAE;EAC7B,MAAO;EACN;CACF,IAAK,CAAC,QAAQ,GAAG,KAAK,CAAA;CACtB,IAAO,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,CAAC,EAAE,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,CAAA;CAC1D,IAAK,CAAC,GAAG,CAAC,KAAK,CAAC,SAAS,GAAG,EAAE,CAAA;CAC9B,IAAK,QAAQ,GAAG,CAAC,EAAE;EAClB,IAAK,CAAC,KAAK,EAAE,CAAA;EACZ;CACD,CAAA;;AAEF,mBAAC,aAAa,6BAAG;CAChB,IAAK,CAAC,UAAU,EAAE,CAAA;CACjB,CAAA;;AAEF,mBAAC,eAAe,+BAAG;CAClB,IAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,iBAAiB,CAAC,CAAA;CAC9C,IAAK,CAAC,IAAI,CAAC,mBAAmB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAA;CACpD,CAAA;;AAEF,mBAAC,OAAO,uBAAG;CACV,IAAK,CAAC,KAAK,EAAE,CAAA;CACZ,CAAA;;AAEF,mBAAC,IAAI,oBAAG;CACP,IAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAA;CAC3C,IAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,gBAAgB,CAAC,CAAA;CAC1C,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAA;CACjD,CAAA;;AAEF,mBAAC,KAAK,qBAAG;CACR,IAAK,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,iBAAiB,CAAC,CAAA;CAC3C,IAAK,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,gBAAgB,CAAC,CAAA;CAC7C,IAAK,CAAC,IAAI,CAAC,gBAAgB,CAAC,eAAe,EAAE,IAAI,CAAC,CAAA;CACjD,CAAA;;AAEF,mBAAC,WAAW,yBAAC,KAAK,EAAE;CACnB,IAAO,EAAE,GAAG,EAAC,IAAE,KAAK,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,WAAW,EAAE,CAAA,IAAG,KAAK,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA,CAAA;CACvE,IAAK,IAAI,EAAC,IAAG,GAAE,EAAE,EAAG,EAAE;EACrB,IAAK,EAAC,IAAG,GAAE,EAAE,EAAG,CAAC,KAAK,CAAC,CAAA;EACtB;CACD,CAAA;;AAEF,mBAAC,YAAY,4BAAG;CACf,IAAK,IAAI,CAAC,eAAe,KAAK,SAAS,EAAE;EACxC,OAAQ,IAAI,CAAC,eAAe,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,GAAG,KAAK;EACrD;CACF,IAAK,WAAW,GAAG,KAAK,CAAA;CACxB,IAAK;EACJ,QAAS,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,EAAE;GACxC,IAAK,OAAO,GAAG;IACd,WAAY,GAAG,IAAI,CAAA;IAClB;GACD,CAAC,CAAA;EACF,CAAC,OAAO,GAAG,EAAE;EACd,OAAQ,CAAC,GAAG,CAAC,GAAG,CAAC,CAAA;EAChB;CACF,IAAK,CAAC,eAAe,GAAG,WAAW,CAAA;CACnC,OAAQ,IAAI,CAAC,YAAY,EAAE;CAC1B,CAAA,AAGF,AAAuB;;;;"}